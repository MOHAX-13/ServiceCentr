<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>сервис</title>
        <link rel="stylesheet" href="css/tabs.css">
        <link rel="stylesheet" href="css/acceptance.css">
    </head>

    <body>
        <div id="tabs">
            <div class="tab whiteborder">Приемка</div>
            <div class="tab">Текучка</div>
            <div class="tab">Выдача</div>
            <div class="tabContent">
                <div id="timedisplay"></div>
                <form id="contact_form" class="contact_form" action="#" method="post">
                    <ul>
                        <li>
                            <h2>Оформление аппарата в ремонт</h2>
                            <span class="required_notification">* Поля обязательные для заполнения</span>
                        </li>

                        <li>
                            <label for="nameZ" >Номер заказа</label><div id="nameOrder"><div>
                            <input name="entry.553477" id="nameZ" type="text" value="1"/>
                        </li>
                        <li>
                            <label for="name">Наименование модели</label>
                            <input name="entry.2144833880" id="name" type="text"  placeholder="Samsung" required />
                        </li>
                        <li>
                            <label for="imei">Серийный номер (IMEI)</label>
                            <input name="entry.713423815" id="imei" type="text"  placeholder="12345678901234" required />
                        </li>
                        <li>
                            <label for="name_client">Ф.И.О. Клиента</label>
                            <input name="entry.971044723" id="name_client" type="text"  placeholder="Иванов" required />
                        </li>
                        <li>
                            <label for="phone">Телефон клиента</label>
                            <input name="entry.67712943" id="phone" type="text"  placeholder="+375-29-1234567" required />
                        </li>
                        
                        <li>
                            <label for="message">Описание поломки:</label>
                            <textarea name="entry.28270132" id="message" cols="40" rows="6" required ></textarea>
                        </li>
                        <li>
                            <button class="submit" type="submit">Сформировать заказ</button>
                        </li>
                    </ul>
                </form>
            </div>
            <div class="tabContent">
                <div id="info">
                    <iframe src="https://docs.google.com/spreadsheets/d/e/2PACX-1vSX3ODOfqiELwSmfvPihXRSwijxg80vejt2UsJExXI7AQCGFqxI8pBMAo8F9fMR2xlG4Yj7DEB50ZYl/pubhtml?widget=true&amp;headers=false" width="700" height="520"></iframe>
                </div>
            </div>
            <div class="tabContent">
                <script>
                    function makeApiCall() {
                      var params = {
                        // The ID of the spreadsheet to update.
                        spreadsheetId: '1jc2wrbpZXwe_EVLGMx8VQl--dMm7Ww9X7i407nwKO2M',  // TODO: Update placeholder value.
                      };

                      var batchUpdateValuesRequestBody = {
                        // How the input data should be interpreted.
                        valueInputOption: 'RAW',  // TODO: Update placeholder value.

                        // The new values to apply to the spreadsheet.
                        data: [],  // TODO: Update placeholder value.

                        // TODO: Add desired properties to the request body.
                      };

                      var request = gapi.client.sheets.spreadsheets.values.batchUpdate(params, batchUpdateValuesRequestBody);
                      request.then(function(response) {
                        // TODO: Change code below to process the `response` object:
                        console.log(response.result);
                      }, function(reason) {
                        console.error('error: ' + reason.result.error.message);
                      });
                    }

                    function initClient() {
                      var API_KEY = 'AIzaSyB21iVuSKZeCeAOxFNLf7SXaCJQmbAS2fg';  // TODO: Update placeholder with desired API key.

                      var CLIENT_ID = '287979718499-7i02abit89rp2rq7mgisr8oqfn1dqn74.apps.googleusercontent.com';  // TODO: Update placeholder with desired client ID.

                      // TODO: Authorize using one of the following scopes:
                      //   'https://www.googleapis.com/auth/drive'
                      //   'https://www.googleapis.com/auth/drive.file'
                      //   'https://www.googleapis.com/auth/spreadsheets'
                      var SCOPE = 'https://www.googleapis.com/auth/spreadsheets';

                      gapi.client.init({
                        'apiKey': API_KEY,
                        'clientId': CLIENT_ID,
                        'scope': SCOPE,
                        'discoveryDocs': ['https://sheets.googleapis.com/$discovery/rest?version=v4'],
                      }).then(function() {
                        gapi.auth2.getAuthInstance().isSignedIn.listen(updateSignInStatus);
                        updateSignInStatus(gapi.auth2.getAuthInstance().isSignedIn.get());
                      });
                    }

                    function handleClientLoad() {
                      gapi.load('client:auth2', initClient);
                    }

                    function updateSignInStatus(isSignedIn) {
                      if (isSignedIn) {
                        makeApiCall();
                      }
                    }

                    function handleSignInClick(event) {
                      gapi.auth2.getAuthInstance().signIn();
                    }

                    function handleSignOutClick(event) {
                      gapi.auth2.getAuthInstance().signOut();
                    }
                    </script>
                    <script async defer src="https://apis.google.com/js/api.js"
                      onload="this.onload=function(){};handleClientLoad()"
                      onreadystatechange="if (this.readyState === 'complete') this.onload()">
                    </script>
                    <button id="signin-button" onclick="handleSignInClick()">Sign in</button>
                    <button id="signout-button" onclick="handleSignOutClick()">Sign out</button>
                 
                <form id="issue_an_order" class="contact_form" action="#" method="post">
                    <ul>
                        <li>
                            <label for="nameIssue" >Номер выдаваемого заказа</label>
                            <input name="" id="nameIssue" type="text" value=""/>
                        </li>
                        <li>
                            <button class="submit" type="submit">Выдать заказ</button>
                        </li>
                    </ul>
                </form>
            </div>
        </div>
        <script src="js/jquery-3.3.1.min.js"></script>
        <script src="js/tabs.js"></script>
        <script src="js/main.js"></script>
        <script src="js/gSheet.js"></script>
    </body>
</html>